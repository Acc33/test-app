(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{8445:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(3366),a=r(7462),o=r(7294),i=r(6010),s=r(4780),l=r(5861),c=r(1657),d=r(948),u=r(4867);function h(e){return(0,u.Z)("MuiCardHeader",e)}var m=(0,r(1588).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),f=r(5893);const p=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({[`& .${m.title}`]:t.title,[`& .${m.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),v=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),g=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var y=o.forwardRef((function(e,t){const r=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:d,className:u,component:m="div",disableTypography:y=!1,subheader:j,subheaderTypographyProps:Z,title:w,titleTypographyProps:C}=r,P=(0,n.Z)(r,p),S=(0,a.Z)({},r,{component:m,disableTypography:y}),O=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},h,t)})(S);let N=w;null==N||N.type===l.Z||y||(N=(0,f.jsx)(l.Z,(0,a.Z)({variant:d?"body2":"h5",className:O.title,component:"span",display:"block"},C,{children:N})));let _=j;return null==_||_.type===l.Z||y||(_=(0,f.jsx)(l.Z,(0,a.Z)({variant:d?"body2":"body1",className:O.subheader,color:"text.secondary",component:"span",display:"block"},Z,{children:_}))),(0,f.jsxs)(x,(0,a.Z)({className:(0,i.Z)(O.root,u),as:m,ref:t,ownerState:S},P,{children:[d&&(0,f.jsx)(v,{className:O.avatar,ownerState:S,children:d}),(0,f.jsxs)(b,{className:O.content,ownerState:S,children:[N,_]}),o&&(0,f.jsx)(g,{className:O.action,ownerState:S,children:o})]}))}))},3290:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return r(8821)}])},8821:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n=r(5893),a=r(9008),o=r(7357),i=r(3156),s=r(5861),l=r(6886),c=r(6964),d=r(6242),u=r(4267),h=r(9661),m=r(7720),f=r(3366),p=r(7462),x=r(7294),v=r(6010),g=r(4780),b=r(948),y=r(1657),j=r(4867);function Z(e){return(0,j.Z)("MuiCardActions",e)}(0,r(1588).Z)("MuiCardActions",["root","spacing"]);const w=["disableSpacing","className"],C=(0,b.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,p.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})));var P=x.forwardRef((function(e,t){const r=(0,y.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:o}=r,i=(0,f.Z)(r,w),s=(0,p.Z)({},r,{disableSpacing:a}),l=(e=>{const{classes:t,disableSpacing:r}=e,n={root:["root",!r&&"spacing"]};return(0,g.Z)(n,Z,t)})(s);return(0,n.jsx)(C,(0,p.Z)({className:(0,v.Z)(l.root,o),ownerState:s,ref:t},i))})),S=r(3321);function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}console.log(c.userData);var N={avatar:"/static/images/avatars/avatar_6.png",city:"Vancouver",country:"Canada",jobTitle:"Senior Developer",timezone:"GTM-7"},_=function(e){return(0,n.jsxs)(d.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}({},e,{children:[(0,n.jsx)(u.Z,{children:(0,n.jsxs)(o.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(h.Z,{src:N.avatar,sx:{height:64,mb:2,width:64}}),(0,n.jsx)(s.Z,{color:"textPrimary",gutterBottom:!0,variant:"h5",children:N.name}),(0,n.jsx)(s.Z,{color:"textSecondary",variant:"body2",children:"".concat(N.city," ").concat(N.country)}),(0,n.jsx)(s.Z,{color:"textSecondary",variant:"body2",children:N.timezone})]})}),(0,n.jsx)(m.Z,{}),(0,n.jsx)(P,{children:(0,n.jsx)(S.Z,{color:"primary",fullWidth:!0,variant:"text",children:"Upload picture"})})]}))},L=r(8520),T=r.n(L),M=r(8445),k=r(135),R=r(1163);function E(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,a)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){E(o,n,a,i,s,"next",e)}function s(e){E(o,n,a,i,s,"throw",e)}i(void 0)}))}}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){A(e,t,r[t])}))}return e}var B=function(e){var t=(0,x.useState)({firstName:"",lastName:"",email:"",membership_date:"",cohort:""}),r=t[0],a=t[1];(0,x.useEffect)((function(){var e=sessionStorage.getItem("user");function t(){return(t=W(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:4000/auth/getUserInfo",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).catch((function(e){console.log(e)})).then((function(e){return e.ok?e.json():void console.log("Failed to get data")})).then((function(e){return a({firstName:e.profile.first_name,lastName:e.profile.last_name,email:e.profile.email_addr,membership_date:e.profile.created_date.slice(0,10),cohort:e.cohort}),e}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log(e),function(){t.apply(this,arguments)}()}),[]);var i=(0,R.useRouter)(),s=function(e){a(q({},r,A({},e.target.name,e.target.value)))};return(0,n.jsx)("form",q({autoComplete:"off",noValidate:!0},e,{children:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(M.Z,{subheader:"The information can be edited",title:"Profile"}),(0,n.jsx)(m.Z,{}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,n.jsx)(l.ZP,{item:!0,md:6,xs:12,children:(0,n.jsx)(k.Z,{fullWidth:!0,helperText:"Please specify the first name",label:"First name",name:"firstName",onChange:s,required:!0,value:r.firstName,variant:"outlined"})}),(0,n.jsx)(l.ZP,{item:!0,md:6,xs:12,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Last name",name:"lastName",onChange:s,required:!0,value:r.lastName,variant:"outlined"})}),(0,n.jsx)(l.ZP,{item:!0,md:6,xs:12,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Email Address",name:"email",onChange:s,required:!0,value:r.email,variant:"outlined"})}),(0,n.jsx)(l.ZP,{item:!0,md:6,xs:12,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Membership Date",name:"membership_date",onChange:s,required:!0,value:r.membership_date,variant:"outlined"})}),(0,n.jsx)(l.ZP,{item:!0,md:6,xs:12,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Cohort Name",name:"cohort",onChange:s,required:!0,value:r.cohort,variant:"outlined"})})]})}),(0,n.jsx)(m.Z,{}),(0,n.jsx)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",p:2},children:(0,n.jsx)(S.Z,{color:"primary",variant:"contained",onClick:function(){i.push("/"),sessionStorage.removeItem("user")},children:"Log Out"})})]})}))},D=r(6447),H=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{children:(0,n.jsx)("title",{children:"Account | Material Kit"})}),(0,n.jsx)(o.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,n.jsxs)(i.Z,{maxWidth:"lg",children:[(0,n.jsx)(s.Z,{sx:{mb:3},variant:"h4",children:"Account"}),(0,n.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,n.jsx)(l.ZP,{item:!0,lg:4,md:6,xs:12,children:(0,n.jsx)(_,{})}),(0,n.jsx)(l.ZP,{item:!0,lg:8,md:6,xs:12,children:(0,n.jsx)(B,{})})]})]})})]})};H.getLayout=function(e){return(0,n.jsx)(D.c,{children:e})};var I=H},6964:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g},userData:function(){return v}});var n=r(5893),a=r(9008),o=r(1664),i=r(1163),s=r(2175),l=r(4231),c=r(7357),d=r(3156),u=r(5861),h=r(135),m=r(3321),f=r(3795),p=r(2066);(0,p.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M9.53144612,22.005 L9.53144612,13.0552149 L6.44166667,13.0552149 L6.44166667,9.49875 L9.53144612,9.49875 L9.53144612,6.68484375 C9.53144612,5.19972656 9.95946769,4.04680661 10.8155103,3.22608401 C11.6715529,2.4053613 12.808485,1.995 14.2263057,1.995 C15.3766134,1.995 16.3129099,2.04710915 17.0351961,2.15132812 L17.0351961,5.3169726 L15.1090998,5.3169726 C14.3868137,5.3169726 13.8919142,5.47330073 13.6244006,5.78595698 C13.4103902,6.04650407 13.3033846,6.46337874 13.3033846,7.03658198 L13.3033846,9.49875 L16.71418,9.49875 L16.2326559,13.0552149 L13.3033846,13.0552149 L13.3033846,22.005 L9.53144612,22.005 Z"})}),"Facebook"),(0,p.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M21,12.2177419 C21,13.9112905 20.6311475,15.4233869 19.8934426,16.7540323 C19.1557377,18.0846776 18.1168031,19.1249998 16.7766393,19.875 C15.4364756,20.6250002 13.8934424,21 12.147541,21 C10.4999998,21 8.97540984,20.5947579 7.57377049,19.7842742 C6.17213115,18.9737905 5.05942604,17.8790323 4.23565574,16.5 C3.41188543,15.1209677 3,13.6209679 3,12 C3,10.3790321 3.41188543,8.87903226 4.23565574,7.5 C5.05942604,6.12096774 6.17213115,5.02620949 7.57377049,4.21572581 C8.97540984,3.40524212 10.4999998,3 12.147541,3 C14.5327871,3 16.5737705,3.78629051 18.2704918,5.35887097 L15.7991803,7.71774194 C15.0122953,6.96774175 14.0655738,6.52016129 12.9590164,6.375 C11.9262295,6.22983871 10.9057375,6.375 9.89754098,6.81048387 C8.88934445,7.24596774 8.07786904,7.89919355 7.46311475,8.77016129 C6.79918033,9.71370968 6.46721311,10.7903228 6.46721311,12 C6.46721311,13.0403228 6.72540984,13.9899192 7.24180328,14.8487903 C7.75819672,15.7076615 8.4467215,16.3971776 9.30737705,16.9173387 C10.1680326,17.4374998 11.1147541,17.6975806 12.147541,17.6975806 C13.2540984,17.6975806 14.2254096,17.455645 15.0614754,16.9717742 C15.7254098,16.5846772 16.2786885,16.0645161 16.7213115,15.4112903 C17.0409838,14.8790321 17.2499998,14.3467744 17.3483607,13.8145161 L12.147541,13.8145161 L12.147541,10.6935484 L20.852459,10.6935484 C20.9508199,11.2258066 21,11.7338712 21,12.2177419 Z"})}),"Google"),r(7294);function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={},g=function(){var e=(0,i.useRouter)(),t=(0,s.TA)({initialValues:{email:"",password:""},validationSchema:l.Ry({email:l.Z_().email("Must be a valid email").max(255).required("Email is required"),password:l.Z_().max(255).required("Password is required")}),onSubmit:function(t,r){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){x(e,t,r[t])}))}return e}({},t);r.resetForm(),fetch("http://localhost:4000/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch((function(e){alert("Network Error!")})).then((function(e){if(console.log(e.ok),1==e.ok)return e.json();(!e||!e.ok||e.status>=400)&&alert("Wrong email or password, please try again!")})).then((function(t){t&&(v=t,console.log(t),sessionStorage.setItem("user",t.profile.rows[0].email_addr),e.push({pathname:"/patients",query:{email:t.profile.rows[0].email_addr,firstname:t.profile.rows[0].first_name,lastname:t.profile.rows[0].last_name}},"/patients"))}))}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{children:(0,n.jsx)("title",{children:"Login | Material Kit"})}),(0,n.jsx)(c.Z,{component:"main",sx:{alignItems:"center",display:"flex",flexGrow:1,minHeight:"100%"},children:(0,n.jsx)(d.Z,{maxWidth:"sm",children:(0,n.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,n.jsx)("h1",{children:"Welcome to the Healme dashboard"}),(0,n.jsx)(c.Z,{sx:{my:3},children:(0,n.jsx)(u.Z,{color:"textPrimary",variant:"h4",children:"Sign in"})}),(0,n.jsx)(h.Z,{error:Boolean(t.touched.email&&t.errors.email),fullWidth:!0,helperText:t.touched.email&&t.errors.email,label:"Email Address",margin:"normal",name:"email",onBlur:t.handleBlur,onChange:t.handleChange,type:"email",value:t.values.email,variant:"outlined"}),(0,n.jsx)(h.Z,{error:Boolean(t.touched.password&&t.errors.password),fullWidth:!0,helperText:t.touched.password&&t.errors.password,label:"Password",margin:"normal",name:"password",onBlur:t.handleBlur,onChange:t.handleChange,type:"password",value:t.values.password,variant:"outlined"}),(0,n.jsx)(c.Z,{sx:{py:2},children:(0,n.jsx)(m.Z,{color:"primary",disabled:t.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Sign In Now"})}),(0,n.jsxs)(u.Z,{color:"textSecondary",variant:"body2",children:["Don't have an account?"," ",(0,n.jsx)(o.default,{href:"/register",children:(0,n.jsx)(f.Z,{to:"/register",variant:"subtitle2",underline:"hover",sx:{cursor:"pointer"},children:"Sign Up"})})]})]})})})]})}}},function(e){e.O(0,[774,15,319,791,781,878,871,375,267,868,447,888,179],(function(){return t=3290,e(e.s=t);var t}));var t=e.O();_N_E=t}]);